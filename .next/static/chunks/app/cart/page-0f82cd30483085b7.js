(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5],{289:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>p});var i=r(5155),t=r(6766),a=r(7168),n=r(2115),l=r(5538),c=r(9428),d=r(3999);let o=n.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,i.jsx)(l.bL,{className:(0,d.cn)("grid gap-2",r),...t,ref:s})});o.displayName=l.bL.displayName;let u=n.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,i.jsx)(l.q7,{ref:s,className:(0,d.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),...t,children:(0,i.jsx)(l.C1,{className:"flex items-center justify-center",children:(0,i.jsx)(c.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});u.displayName=l.q7.displayName;var h=r(7656),x=r(7712),m=r(4616),g=r(2525);function p(){let{items:e,removeFromCart:s,updateQuantity:r,updateBillingType:n,getTotalPrice:l}=(0,h._)(),c=l(),d=c+0;return 0===e.length?(0,i.jsx)("div",{className:"pt-24 bg-sandy-beige min-h-screen",children:(0,i.jsxs)("div",{className:"container px-6 py-16 text-center",children:[(0,i.jsx)("h1",{className:"text-4xl font-bold mb-8",children:"Your Shopping Cart"}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-12 border border-stone-200/60",children:[(0,i.jsx)("p",{className:"text-xl text-gray-600 mb-8",children:"Your cart is empty"}),(0,i.jsx)(a.$,{asChild:!0,className:"bg-sage-green hover:bg-sage-green-600",children:(0,i.jsx)("a",{href:"/stacks",children:"Continue Shopping"})})]})]})}):(0,i.jsx)("div",{className:"pt-24 bg-sandy-beige min-h-screen",children:(0,i.jsxs)("div",{className:"container px-6 py-16",children:[(0,i.jsx)("h1",{className:"text-4xl font-bold text-center mb-12",children:"Your Shopping Cart"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 lg:gap-8",children:[(0,i.jsx)("div",{className:"lg:col-span-8 xl:col-span-9 space-y-4",children:e.map(e=>(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6 flex items-center gap-6 border border-stone-200/60",children:[(0,i.jsx)(t.default,{src:e.image||"/placeholder.svg",alt:e.name,width:80,height:80,className:"rounded-lg object-cover"}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("h3",{className:"text-xl font-semibold",children:e.name}),(0,i.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:(0,i.jsxs)(o,{className:"flex gap-4",value:e.billingType,onValueChange:s=>n(e.id,s),children:[(0,i.jsxs)("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[(0,i.jsx)(u,{value:"one-time",id:"one-".concat(e.id)}),(0,i.jsxs)("span",{children:["One-time • $",e.price.toFixed(2)]})]}),(0,i.jsxs)("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[(0,i.jsx)(u,{value:"subscribe",id:"sub-".concat(e.id)}),(0,i.jsxs)("span",{children:["Subscribe (10% off) • $",(Math.round(90*e.price)/100).toFixed(2)]})]})]})})]}),(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)(a.$,{variant:"outline",size:"sm",onClick:()=>r(e.id,e.quantity-1),className:"h-8 w-8 p-0",children:(0,i.jsx)(x.A,{className:"h-4 w-4"})}),(0,i.jsx)("span",{className:"w-8 text-center font-semibold",children:e.quantity}),(0,i.jsx)(a.$,{variant:"outline",size:"sm",onClick:()=>r(e.id,e.quantity+1),className:"h-8 w-8 p-0",children:(0,i.jsx)(m.A,{className:"h-4 w-4"})})]}),(0,i.jsx)(a.$,{variant:"outline",size:"sm",onClick:()=>s(e.id),className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:(0,i.jsx)(g.A,{className:"h-4 w-4"})})]},e.id))}),(0,i.jsx)("div",{className:"lg:col-span-4 xl:col-span-3",children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6 sticky top-32 border border-stone-200/60",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Order Summary"}),(0,i.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{children:"Subtotal"}),(0,i.jsxs)("span",{children:["$",c.toFixed(2)]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{children:"Shipping"}),(0,i.jsx)("span",{className:"text-green-600",children:"Free"})]}),(0,i.jsx)("hr",{}),(0,i.jsxs)("div",{className:"flex justify-between text-xl font-bold",children:[(0,i.jsx)("span",{children:"Total"}),(0,i.jsxs)("span",{children:["$",d.toFixed(2)]})]})]}),(0,i.jsx)(a.$,{className:"w-full bg-sage-green hover:bg-sage-green-600 text-base py-3 rounded-lg",onClick:async()=>{try{let s=e.reduce((e,s)=>{let r=s.source||"unknown";return e[r]=(e[r]||0)+1,e},{}),r=e.reduce((e,s)=>(e[s.billingType]=(e[s.billingType]||0)+1,e),{});await fetch("/api/waitlist",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:e.map(e=>{let{id:s,name:r,price:i,image:t,quantity:a,billingType:n,source:l}=e;return{id:s,name:r,price:i,image:t,quantity:a,billingType:n,source:l}}),fromRoute:s,billingSummary:r,total:d})})}catch(e){}window.location.href="/waitlist"},children:"Join waitlist"})]})})]})]})})}},3999:(e,s,r)=>{"use strict";r.d(s,{cn:()=>a});var i=r(2596),t=r(9688);function a(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return(0,t.QP)((0,i.$)(s))}},4720:(e,s,r)=>{Promise.resolve().then(r.bind(r,289))},7168:(e,s,r)=>{"use strict";r.d(s,{$:()=>d});var i=r(5155),t=r(2115),a=r(9708),n=r(2085),l=r(3999);let c=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=t.forwardRef((e,s)=>{let{className:r,variant:t,size:n,asChild:d=!1,...o}=e,u=d?a.DX:"button";return(0,i.jsx)(u,{className:(0,l.cn)(c({variant:t,size:n,className:r})),ref:s,...o})});d.displayName="Button"},7656:(e,s,r)=>{"use strict";r.d(s,{CartProvider:()=>n,_:()=>l});var i=r(5155),t=r(2115);let a=(0,t.createContext)(void 0);function n(e){let{children:s}=e,[r,n]=(0,t.useState)([]);(0,t.useEffect)(()=>{try{let e=localStorage.getItem("regimenhub:cart");if(e){let s=JSON.parse(e);Array.isArray(s)&&n(s)}}catch(e){}},[]),(0,t.useEffect)(()=>{try{localStorage.setItem("regimenhub:cart",JSON.stringify(r))}catch(e){}},[r]);let l=e=>{n(s=>s.filter(s=>s.id!==e))};return(0,i.jsx)(a.Provider,{value:{items:r,addToCart:e=>{n(s=>{var r;return s.find(s=>s.id===e.id)?s.map(s=>s.id===e.id?{...s,quantity:s.quantity+1}:s):[...s,{id:e.id,name:e.name,price:e.price,image:e.image,quantity:1,billingType:null!==(r=e.billingType)&&void 0!==r?r:"one-time"}]})},removeFromCart:l,updateQuantity:(e,s)=>{if(s<=0){l(e);return}n(r=>r.map(r=>r.id===e?{...r,quantity:s}:r))},updateBillingType:(e,s)=>{n(r=>r.map(r=>r.id===e?{...r,billingType:s}:r))},getTotalPrice:()=>r.reduce((e,s)=>e+("subscribe"===s.billingType?Math.round(90*s.price)/100:s.price)*s.quantity,0),getItemCount:()=>r.reduce((e,s)=>e+s.quantity,0)},children:s})}function l(){let e=(0,t.useContext)(a);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}}},e=>{var s=s=>e(e.s=s);e.O(0,[848,425,584,441,684,358],()=>s(4720)),_N_E=e.O()}]);